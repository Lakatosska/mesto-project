(()=>{"use strict";function e(e){e.classList.add("popup_opened"),document.addEventListener("keydown",r)}function t(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",r)}function r(e){"Escape"===e.key&&t(document.querySelector(".popup_opened"))}document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("mousedown",(function(r){r.target.classList.contains("popup_opened")&&t(e),r.target.classList.contains("popup__close-button")&&t(e)}))}));var n=document.querySelector(".popup_type_image"),o=n.querySelector(".popup__photo"),c=n.querySelector(".popup__sightseeing");function u(t,r){var u=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),a=u.querySelector(".card__photo"),i=u.querySelector(".card__sightseeing");a.src=r,a.alt=t,i.textContent=t,a.addEventListener("click",(function(){o.src=r,o.alt=t,c.textContent=t,e(n)}));var s=u.querySelector(".card__heart-button"),l=u.querySelector(".card__trash-button");return s.addEventListener("click",(function(){return s.classList.toggle("card__heart-button_active")})),l.addEventListener("click",(function(){return u.remove()})),u}var a=function(e,t,r,n){var o=e.querySelector(r);!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?(o.classList.remove(n),o.disabled=!1):(o.classList.add(n),o.disabled=!0)},i=document.querySelector(".profile"),s=document.querySelector(".popup_type_edit-profile"),l=i.querySelector(".profile__edit-button"),p=document.querySelector(".form_type_edit-profile"),d=p.querySelector(".form__input_type_name"),_=p.querySelector(".form__input_type_job"),f=i.querySelector(".profile__name"),m=i.querySelector(".profile__job");l.addEventListener("click",(function(){e(s),d.value=f.textContent,_.value=m.textContent})),p.addEventListener("submit",(function(e){e.preventDefault(),f.textContent=d.value,m.textContent=_.value,t(s)}));var y=document.querySelector(".cards__list");[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){return y.prepend(u(e.name,e.link))}));var v=document.querySelector(".popup_type_add-card");i.querySelector(".profile__add-button").addEventListener("click",(function(){return e(v)}));var S,b,q,k=document.querySelector(".form_type_add-card"),L=k.querySelector(".form__input_type_place"),h=k.querySelector(".form__input_type_link");k.addEventListener("submit",(function(e){e.preventDefault(),y.prepend(u(L.value,h.value)),t(v),k.reset();var r=v.querySelector(".popup__submit-button");r.disabled=!0,r.classList.add("popup__submit-button_disabled")})),b=(S={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).formSelector,q=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(S,["formSelector"]),Array.from(document.querySelectorAll(b)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var r=t.inputSelector,n=t.inputErrorClass,o=t.errorClass,c=t.submitButtonSelector,u=t.inactiveButtonClass,i=Array.from(e.querySelectorAll(r));i.forEach((function(t){t.addEventListener("input",(function(){!function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.validity.valid?function(e,t,r,n){e.classList.remove(t),r.classList.remove(n),r.textContent=""}(t,r,o,n):function(e,t,r,n,o){e.classList.add(t),r.classList.add(n),r.textContent=o}(t,r,o,n,t.validationMessage)}(e,t,n,o),a(e,i,c,u)}))})),a(e,i,c,u)}(e,q)}))})();